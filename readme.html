<h1 id="atelier">Atelier</h1>
<p><strong>utiliser le code fourni dans le rÃ©pertoire</strong> <code>php</code> du dÃ©pÃ´t de l'atelier <code>atelier-oblog</code> :</p>
<h2 id="objectifs">Objectifs</h2>
<ul>
<li>Avancer sur le projet oBlog ğŸ‰</li>
<li>Utiliser le code HTML/CSS de l'intÃ©grateur ğŸŒˆ</li>
<li>Continuer Ã  structurer plus proprement nos donnÃ©es avec des <code>class</code> ğŸ¤“</li>
<li>âš ï¸ Pour chaque Ã©tape, coder dans une <strong>branche git spÃ©cifique</strong>, puis <strong>commiter</strong> et enfin <strong>fusionner dans master</strong> une fois l'Ã©tape terminÃ©e</li>
</ul>
<h2 id="rappels-divers">Rappels divers</h2>
<ul>
<li>Le site est structurÃ© autour d'un fichier index.php qui affiche diffÃ©rents templates selon la valeur de <code>$_GET['page']</code> (ou <code>filter_input(INPUT_GET, 'page')</code>).</li>
<li>Une classe dÃ©finit des propriÃ©tÃ©s et des mÃ©thodes pour ses futures instances.</li>
<li>Chaque propriÃ©tÃ©, chaque mÃ©thode peut Ãªtre dÃ©finie en accÃ¨s <code>public</code> (accessible depuis l'extÃ©rieur de la classe) ou <code>private</code> (accessible uniquement depuis l'intÃ©rieur du code de la classe), selon son utilisation/but.</li>
</ul>
<h2 id="code-fourni">Code fourni</h2>
<ul>
<li>Une intÃ©gration HTML/CSS toute prÃªte !</li>
<li>Un fichier <code>bonus/inc/data.php</code> Ã  utiliser Ã  l'Ã©tape des bonus (donc on le laisse de cÃ´tÃ© pour le moment ğŸ™)</li>
</ul>
<h2 id="Ã©tapes">Ã‰tapes</h2>
<h3 id="Ã©tape-1---dÃ©couper-scissors">Ã‰tape 1 - DÃ©couper âœ‚ï¸</h3>
<p><em>On va rÃ©cupÃ©rer l'intÃ©gration HTML/CSS fournie par le graphiste, et la dÃ©couper en templates.</em></p>
<blockquote>
  <p>N'hÃ©sitez pas Ã  faire plusieurs commits, avec des messages clairs ğŸ‘Œ</p>
</blockquote>
<p>CrÃ©er une branche <code>cut-cut-cut</code> et se placer dedans.</p>
<ol>
<li>Ã€ partir de l'intÃ©gration HTML/CSS fournie dans le dossier integration-html-css/ :<ul>
<li>dÃ©couper l'intÃ©gration en plusieurs morceaux, un morceau par template PHP</li>
<li>3 templates =&gt; 3 morceaux (cf. le code source de oBlog ğŸ˜‰)</li>
<li>pour le template central qui affiche les articles, commenter la boucle <code>foreach</code> pour le moment</li></ul></li>
<li>Bien contrÃ´ler le bon affichage de l'intÃ©gration HTML/CSS :<ul>
<li>le site doit Ãªtre Â«&nbsp;plein de couleurs&nbsp;Â» et ne doit plus ressembler Ã  une maquette filaire ğŸ‘Œ</li>
<li>la page d'accueil doit s'afficher correctement (pas de bugs PHP)</li></ul></li>
</ol>
<p>Ajouter et commiter les modifications avec git :)  <br />
Revenir sur la branche <code>master</code> et y fusionner la branche <code>cut-cut-cut</code>.  </p>
<h3 id="Ã©tape-2---dynamiser-boom">Ã‰tape 2 - Dynamiser ğŸ’¥</h3>
<p><em>On va dynamiser les templates, pour afficher les donnÃ©es des articles.</em></p>
<blockquote>
  <p>N'hÃ©sitez pas Ã  faire plusieurs commits, avec des messages clairs ğŸ‘Œ</p>
</blockquote>
<p>CrÃ©er une branche <code>dynamiser</code> et se placer dedans.</p>
<ol>
<li>Dynamiser l'affichage <em>des</em> articles dans le template home.tpl.php :<ul>
<li>adapter la boucle sur les objets <code>Article</code> pour dynamiser la liste d'articleâ€¦</li>
<li>â€¦ en veillant Ã  conserver intacte l'intÃ©gration HTML/CSS</li></ul></li>
<li>Dynamiser l'affichage d'<em>un</em> article dans le template article.tpl.php<ul>
<li>adapter l'utilisation de l'objet <code>Article</code> pour dynamiser la page d'un articleâ€¦</li>
<li>â€¦ en veillant Ã  conserver intacte l'intÃ©gration HTML/CSS</li></ul></li>
<li>On veut aussi dynamiser les catÃ©gories (affichÃ©es en haut <em>et</em> Ã  droite) :<ul>
<li>rÃ©cupÃ©rer la liste des catÃ©gories en PHP</li>
<li>itÃ©rer sur la liste dans les templates adaptÃ©s et afficher les catÃ©gories dynamiquement</li></ul></li>
<li>On veut aussi dynamiser les auteurs (affichÃ©s Ã  droite) :<ul>
<li>rÃ©cupÃ©rer la liste des auteurs en PHP</li>
<li>itÃ©rer sur la liste dans le template adaptÃ© et afficher les auteurs dynamiquement</li></ul></li>
</ol>
<p>Ajouter et commiter les modifications avec git :)  <br />
Revenir sur la branche <code>master</code> et y fusionner la branche <code>dynamiser</code>.  </p>
<p><details><summary>Exemple de code pour la liste des auteurs</summary></p>
<pre><code class="hljs html language-html"><span class="hljs-comment">&lt;!-- Auteurs: https://getbootstrap.com/docs/4.1/components/card/#list-groups --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;card&quot;</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;card-header&quot;</span>&gt;</span>Auteurs<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;list-group list-group-flush&quot;</span>&gt;</span>
    <span class="hljs-meta">&lt;?php foreach ($authors as $authorId =&gt; $authorName) : ?&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;list-group-item&quot;</span>&gt;</span>&lt;?= $authorName ?&gt;<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-meta">&lt;?php endforeach; ?&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p></details></p>
<h3 id="Ã©tape-3---liens-internes-anchor">Ã‰tape 3 - Liens internes âš“ï¸</h3>
<p><em>On continue Ã  dynamiser le site, cette fois en gÃ©rant les liens entre les pages.</em></p>
<blockquote>
  <p>N'hÃ©sitez pas Ã  faire plusieurs commits, avec des messages clairs ğŸ‘Œ</p>
</blockquote>
<p>CrÃ©er une branche <code>liens</code> et se placer dedans.</p>
<ol>
<li>Dans l'entÃªte de la page :<ul>
<li>dÃ©finir le lien vers chaque page catÃ©gorie</li>
<li>l'URL d'un lien ressemblera Ã  <code>index.php?page=category&amp;id=4</code> (ici <code>4</code> pour la catÃ©gorie dont l'id est 4)</li>
<li>âš ï¸ l'id doit Ãªtre gÃ©rÃ© dynamiquement au sein de l'itÃ©ration</li></ul></li>
<li>Dans la sidebar Ã  droite :<ul>
<li>dÃ©finir le lien vers chaque page catÃ©gorie (mÃªme principe que pour l'entÃªte)</li>
<li>dÃ©finir le lien vers chaque page auteur (mÃªme principe que pour les catÃ©gories)</li>
<li>âš ï¸ l'id doit Ãªtre gÃ©rÃ© dynamiquement au sein de l'itÃ©ration</li></ul></li>
</ol>
<p>VÃ©rifier que tous les liens fonctionnent bien.  </p>
<blockquote>
  <p>âœ‹ A cette Ã©tape on affiche uniquement les noms des auteurs et des catÃ©gories.  <br />
  Les articles liÃ©s seront affichÃ©s aux Ã©tapes 5 et 6.</p>
</blockquote>
<p>Ajouter et commiter les modifications avec git :)  <br />
Revenir sur la branche <code>master</code> et y fusionner la branche <code>liens</code>.  </p>
<h3 id="Ã©tape-4---classes-category--author-sunglasses">Ã‰tape 4 - Classes Category &amp; Author ğŸ˜</h3>
<p><em>On amÃ©liore la gestion des donnÃ©es.</em></p>
<blockquote>
  <p>N'hÃ©sitez pas Ã  faire plusieurs commits, avec des messages clairs ğŸ‘Œ</p>
</blockquote>
<p>CrÃ©er une branche <code>classes-category-author</code> et se placer dedans.</p>
<ol>
<li>Dans le fichier <code>inc/data.php</code>, modifier le code pour utiliser les 2 variables fournies dans le spoiler ci-dessous<ul>
<li>observer que les donnÃ©es transmises aux templates sont diffÃ©rentes</li>
<li><strong>en consÃ©quence, il faudra plus tard (partie 3 ci-dessous) adapter le code des templates pour conserver un affichage correct, mais d'abord, nous devons crÃ©er les classes en codant la partie 2</strong></li></ul></li>
<li>CrÃ©er deux nouvelles classes dans <code>inc/classes/</code> :<ul>
<li>une classe <code>Category</code> pour structurer les donnÃ©es de chaque catÃ©gorie</li>
<li>une classe <code>Author</code> pour structurer les donnÃ©es de chaque auteur</li>
<li>ces 2 classes ressembleront beaucoup Ã  la classe <code>Article</code> dÃ©jÃ  crÃ©Ã©e</li></ul></li>
<li>Corriger l'affichage des templates en mettant Ã  profit ces deux nouvelles classes.<ul>
<li><strong>rappel : <code>$object-&gt;property</code></strong></li></ul></li>
</ol>
<p>VÃ©rifier que toutes les pages sont toujours fonctionnelles.  <br />
Ajouter et commiter les modifications avec git :)  <br />
Revenir sur la branche <code>master</code> et y fusionner la branche <code>classes-category-author</code>.  </p>
<p><details><summary>Indice(s)</summary></p>
<ul>
<li>il faudra coder un ou des paramÃ¨tre(s) optionnel(s) au constructeur afin de dÃ©terminer la valeur de la ou les propriÃ©tÃ©(s)</li>
</ul>
<p></details></p>
<p><details><summary>2 variables pour inc/data.php</summary></p>
<pre><code class="hljs php language-php"><span class="hljs-meta">&lt;?php</span>

<span class="hljs-comment">// [...]</span>

<span class="hljs-comment">// Les catÃ©gories</span>
<span class="hljs-variable">$dataCategoriesList</span> = [
    <span class="hljs-comment">// ID =&gt; objet Category</span>
    <span class="hljs-number">1</span> =&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">Category</span>(<span class="hljs-string">&#x27;TeamBack&#x27;</span>),
    <span class="hljs-number">2</span> =&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">Category</span>(<span class="hljs-string">&#x27;TeamFront&#x27;</span>),
    <span class="hljs-number">3</span> =&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">Category</span>(<span class="hljs-string">&#x27;Collaboration&#x27;</span>),
    <span class="hljs-number">4</span> =&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">Category</span>(<span class="hljs-string">&#x27;Ma Vie De Dev&#x27;</span>)
];

<span class="hljs-comment">// Les auteurs</span>
<span class="hljs-variable">$dataAuthorsList</span> = [
    <span class="hljs-comment">// ID =&gt; objet Author</span>
    <span class="hljs-number">1</span> =&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">Author</span>(<span class="hljs-string">&#x27;Maxime&#x27;</span>),
    <span class="hljs-number">2</span> =&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">Author</span>(<span class="hljs-string">&#x27;Anthony&#x27;</span>),
    <span class="hljs-number">3</span> =&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">Author</span>(<span class="hljs-string">&#x27;Alexandre&#x27;</span>),
    <span class="hljs-number">4</span> =&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">Author</span>(<span class="hljs-string">&#x27;Dario&#x27;</span>),
    <span class="hljs-number">5</span> =&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">Author</span>(<span class="hljs-string">&#x27;Julie&#x27;</span>),
    <span class="hljs-number">6</span> =&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">Author</span>(<span class="hljs-string">&#x27;Lucie&#x27;</span>),
    <span class="hljs-number">7</span> =&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">Author</span>(<span class="hljs-string">&#x27;Xavier&#x27;</span>)
];
</code></pre>
<p></details></p>
<h3 id="Ã©tape-5---page-catÃ©gorie-doughnut">Ã‰tape 5 - Page catÃ©gorie ğŸ©</h3>
<p><em>On va amÃ©liorer la page d'une catÃ©gorie.</em></p>
<blockquote>
  <p>N'hÃ©sitez pas Ã  faire plusieurs commits, avec des messages clairs ğŸ‘Œ</p>
</blockquote>
<p>CrÃ©er une branche <code>page-category</code> et se placer dedans.</p>
<ol>
<li>Dans le template category.tpl.php on veut afficher le nom de la catÃ©gorie dans un <code>&lt;h1&gt;</code> :<ul>
<li>rÃ©cupÃ©rer un objet <code>Category</code> Ã  partir de son id</li></ul></li>
<li>On veut Ã©galement afficher la liste de tous les articles associÃ©s Ã  cette catÃ©gorie :<ul>
<li>rÃ©cupÃ©rer un tableau d'objets <code>Article</code> Ã  partir de la catÃ©gorie</li>
<li>modifier les templates pour afficher les donnÃ©es sur le site</li></ul></li>
</ol>
<p>VÃ©rifier que la page s'affiche correctement.  <br />
Ajouter et commiter les modifications avec git :)  <br />
Revenir sur la branche <code>master</code> et y fusionner la branche <code>page-category</code>.  </p>
<p><details><summary>Indices pour la rÃ©cupÃ©ration des articles d'une catÃ©gorie</summary></p>
<ul>
<li>âš ï¸ attention Ã  ne pas rÃ©cupÃ©rer <em>tous</em> les articles, mais bien uniquement ceux dont le nom de la catÃ©gorie correspond au nom de la catÃ©gorie demandÃ©e</li>
<li>idÃ©e : on peut crÃ©er un tableau vide, qu'on remplira avec les articles de la catÃ©gorie, au fur et Ã  mesure</li>
<li>pour chaque article du site, <em>si</em> le nom de sa catÃ©gorie correspond Ã  la catÃ©gorie demandÃ©e, <em>alors</em> ajouter l'article dans le tableau</li>
<li>Ã  la fin de l'itÃ©ration, le tableau, Ã  retourner, comprendra seulement les articles de la catÃ©gorie</li>
</ul>
<p></details></p>
<h3 id="Ã©tape-6---page-auteur-icecream">Ã‰tape 6 - Page auteur ğŸ¦</h3>
<p>CrÃ©er une branche <code>page-author</code> et se placer dedans.</p>
<blockquote>
  <p>C'est comme l'Ã©tape prÃ©cÃ©dente, mais avec les auteurs au lieu des catÃ©gories ğŸ˜‰</p>
</blockquote>
<p>VÃ©rifier que la page s'affiche correctement.  <br />
Ajouter et commiter les modifications avec git :)  <br />
Revenir sur la branche <code>master</code> et y fusionner la branche <code>page-author</code>.</p>
<p><strong>Fin de l'atelier ğŸ‰</strong></p>
<h2 id="bonus">Bonus</h2>
<p>En cliquant sur <a href="bonus.md">ce lien</a>, je confirme avoir terminÃ© l'atelier avant l'heure et je confirme souhaiter Ãªtre confrontÃ© Ã  une demande qui n'aura pas Ã©tÃ© vue en cours.</p>